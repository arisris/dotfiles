# i3 config file (v4) - Adwaita Dark Theme Optimized
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# --- Adwaita Dark Theme Colors ---
set $bg-color            #1E1E1E
set $inactive-bg-color   #2D2D2D
set $text-color          #DEDDDA
set $inactive-text-color #77767B
set $urgent-bg-color     #ED333B
set $focused-bg-color    #3173c4

# --- Window Appearance ---
# Font setup
font pango:NotoSans Nerd Font 8

# Default window: border 1px, no titlebar
default_border pixel 1
default_floating_border pixel 1

# Window Border Colors
# class                 border             background         text                 indicator        child_border
client.focused          $focused-bg-color  $focused-bg-color  #FFFFFF              $focused-bg-color $focused-bg-color
client.focused_inactive $inactive-bg-color $inactive-bg-color $inactive-text-color $inactive-bg-color $inactive-bg-color
client.unfocused        $inactive-bg-color $inactive-bg-color $inactive-text-color $inactive-bg-color $inactive-bg-color
client.urgent           $urgent-bg-color   $urgent-bg-color   #FFFFFF              $urgent-bg-color  $urgent-bg-color
client.placeholder      $inactive-bg-color $inactive-bg-color $inactive-text-color $inactive-bg-color $inactive-bg-color
client.background       $bg-color

# Gaps Configuration (i3 v4.24 native)
gaps inner 10
gaps outer 0
smart_gaps on
floating_minimum_size 400 x 160
floating_maximum_size -1 x -1

# Float specific window types (dialogs, popups, utility)
for_window [window_role="^(pop-up|task_dialog)$"] floating enable, floating_border pixel 0
for_window [window_type="^(dialog|menu)$"] floating enable

# apps
for_window [class="Ytse"] floating enable, resize 500 700
for_window [class="^(Lxappearance|Nm-connection-editor|Electron|Lightdm-gtk-greeter-settings|Gnome-disks|Xarchiver)$"] floating enable, resize set 800 480, move position center
for_window [class="^(Alacritty|mpv|Pcmanfm|Virt-manager)$"] floating enable, resize set 800 480

# Antigravity
for_window [class="Antigravity" title="^(Manager|Settings)$"] floating enable, resize set 800 480, move position center


# Android Studio & JetBrains IDEs Configuration
for_window [class="^jetbrains-.*" title="Welcome to Android Studio"] floating enable, resize set 800 480, move position center
for_window [class="^jetbrains-.*" window_type="^(splash|dialog)$"] floating enable
no_focus [class="^jetbrains-.*" window_type="notification"]

# Toggle Title Bar / Borders
bindsym $mod+t border toggle

# --- Startup & System ---
set $screen_locker i3lock -c '#2D2D2D' --nofork --ignore-empty-password --show-failed-attempts
exec --no-startup-id picom -b
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id dex --autostart --environment i3
# exec --no-startup-id xset s 600 dpms 600 600 600
exec --no-startup-id xss-lock --transfer-sleep-lock -- $screen_locker
exec --no-startup-id nm-applet

bindsym $mod+F12 exec --no-startup-id $screen_locker
bindsym $mod+Shift+o exec --no-startup-id toggle-dpms.sh

# --- wallpaper random ---
set $wallpaper_dir /home/arisris/.local/share/backgrounds
exec_always --no-startup-id feh --recursive --randomize --bg-fill $wallpaper_dir
bindsym $mod+shift+w exec --no-startup-id feh --recursive --randomize --bg-fill $wallpaper_dir

# --- Screenshot (GTK/CLI Friendly: maim) ---
bindsym Print exec --no-startup-id maim -s | xclip -selection clipboard -t image/png
bindsym $mod+Shift+Print exec --no-startup-id maim -s ~/Pictures/screenshot-$(date +%s).png
bindsym $mod+Print exec --no-startup-id maim ~/Pictures/screenshot-full-$(date +%s).png

# --- Audio Controls ---
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

# --- Window Management ---
floating_modifier $mod
tiling_drag modifier titlebar

# Start Terminal
bindsym $mod+Return exec "alacritty msg create-window || alacritty"

# Kill Focused Window
bindsym $mod+Shift+q kill

# Start Rofi
bindsym $mod+d exec --no-startup-id "rofi -show drun -show-icons -markup-rows -theme-str 'listview {lines:8;columns:2;}'"

# Change Focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move Window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Layout Splits
bindsym $mod+h split h
bindsym $mod+v split v

# Fullscreen Toggle
bindsym $mod+f fullscreen toggle

# Layout Modes
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Floating Toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

# Focus Container
bindsym $mod+a focus parent

# Switch Workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move Window to Workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# --- System Management ---
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart

# Logout Menu
bindsym $mod+Shift+End exec --no-startup-id rofi-exit-menu
bindsym $mod+Shift+e exec --no-startup-id rofi-exit-menu

# other binds
bindsym $mod+Shift+p exec --no-startup-id rofi-music-ui
bindsym $mod+Shift+i exec --no-startup-id rofi-nerd-font-picker


# --- Resize Mode ---
bindsym $mod+r mode "resize"
mode "resize" {
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# --- Status Bar ---
bar {
        status_command i3-status
        i3bar_command i3bar --transparency
        position top
        colors {
                background #00000000
                statusline $text-color
                separator  #66666600
                focused_workspace  $focused-bg-color  $focused-bg-color  $text-color
                active_workspace   $inactive-bg-color $inactive-bg-color $text-color
                inactive_workspace $bg-color          $bg-color          $inactive-text-color
                urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
                binding_mode       $urgent-bg-color   $urgent-bg-color   $text-color
        }
}
